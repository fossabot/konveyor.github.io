<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.103.1"><meta name=description content><link rel=icon href=/images/favicon.png type=image/png><title>Upgrading from 1.2 to 2.0 - Documentation for Konveyor projects</title><link href=/css/nucleus.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet><link href=/css/hybrid.css rel=stylesheet><link href=/css/featherlight.min.css rel=stylesheet><link href=/css/perfect-scrollbar.min.css rel=stylesheet><link href=/css/auto-complete.css rel=stylesheet><link href=/css/atom-one-dark-reasonable.css rel=stylesheet><link href=/css/theme.css rel=stylesheet><link href=/css/tabs.css rel=stylesheet><link href=/css/hugo-theme.css rel=stylesheet><link href=/css/theme-konveyor.css rel=stylesheet><link href=/css/foo.css rel=stylesheet><link href=/css/bar.css rel=stylesheet><script src=/js/jquery-3.3.1.min.js></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style><script>var dataLayer=window.dataLayer=window.dataLayer||[];dataLayer.push({page:"Upgrading from 1.2 to 2.0",fileUniqID:"e148aeb9e5817cf99a099b27b8799cd2"})</script><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-TKPDMS3")</script></head><body data-url=/tackle/upgradeto2/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=/><img src=/images/konveyor_logo.png></img></a>
<a href=https://github.com/konveyor/konveyor.github.io>Documentation source code</a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js></script>
<script type=text/javascript src=/js/auto-complete.js></script>
<script type=text/javascript>var baseurl="http://konveyor.github.io/"</script><script type=text/javascript src=/js/search.js></script></div><div class=highlightable><ul class=topics><li data-nav-id=/crane/ title=Crane class=dd-item><a href=/crane/><b>1 </b>Crane</a><ul><li data-nav-id=/crane/overview/ title=Overview class=dd-item><a href=/crane/overview/>Overview</a></li><li data-nav-id=/crane/tutorials/ title=Tutorials class=dd-item><a href=/crane/tutorials/>Tutorials</a><ul><li data-nav-id=/crane/tutorials/statelessappmirror/ title="Stateless application mirror" class=dd-item><a href=/crane/tutorials/statelessappmirror/>Stateless application mirror</a></li><li data-nav-id=/crane/tutorials/migratek8cluster/ title="Migrating a Kubernetes cluster" class=dd-item><a href=/crane/tutorials/migratek8cluster/>Migrating a Kubernetes cluster</a></li></ul></li><li data-nav-id=/crane/tools/ title=Tools class=dd-item><a href=/crane/tools/>Tools</a><ul><li data-nav-id=/crane/tools/gitopsintegration/ title="Integrating GitOps" class=dd-item><a href=/crane/tools/gitopsintegration/>Integrating GitOps</a></li><li data-nav-id=/crane/tools/customplugins/ title="Developing custom plugins" class=dd-item><a href=/crane/tools/customplugins/>Developing custom plugins</a></li><li data-nav-id=/crane/tools/tunnelapi/ title="Tunnel API" class=dd-item><a href=/crane/tools/tunnelapi/>Tunnel API</a></li><li data-nav-id=/crane/tools/pluginmanager/ title="Plugin Manager" class=dd-item><a href=/crane/tools/pluginmanager/>Plugin Manager</a></li></ul></li><li data-nav-id=/crane/usingcrane/ title="Using Crane" class=dd-item><a href=/crane/usingcrane/>Using Crane</a><ul><li data-nav-id=/crane/usingcrane/step1export/ title="Step One: Export Resources" class=dd-item><a href=/crane/usingcrane/step1export/>Step One: Export Resources</a></li><li data-nav-id=/crane/usingcrane/step2transform/ title="Step Two: Transform Exports" class=dd-item><a href=/crane/usingcrane/step2transform/>Step Two: Transform Exports</a></li><li data-nav-id=/crane/usingcrane/step3apply/ title="Step Three: Apply Patches" class=dd-item><a href=/crane/usingcrane/step3apply/>Step Three: Apply Patches</a></li></ul></li><li data-nav-id=/crane/installation/ title="Installing Crane" class=dd-item><a href=/crane/installation/>Installing Crane</a></li></ul></li><li data-nav-id=/forklift/ title=Forklift class=dd-item><a href=/forklift/><b>2 </b>Forklift</a><ul><li data-nav-id=/forklift/overview/ title=Overview class=dd-item><a href=/forklift/overview/>Overview</a></li><li data-nav-id=/forklift/migratingvms/ title="Migrating virtual machines" class=dd-item><a href=/forklift/migratingvms/>Migrating virtual machines</a><ul><li data-nav-id=/forklift/migratingvms/migrateoptions/ title="Migration plan options" class=dd-item><a href=/forklift/migratingvms/migrateoptions/>Migration plan options</a></li><li data-nav-id=/forklift/migratingvms/migratecli/ title="Migrating virtual machines using the command line" class=dd-item><a href=/forklift/migratingvms/migratecli/>Migrating virtual machines using the command line</a></li><li data-nav-id=/forklift/migratingvms/migrateweb/ title="Migrating virtual machines using the web console" class=dd-item><a href=/forklift/migratingvms/migrateweb/>Migrating virtual machines using the web console</a></li><li data-nav-id=/forklift/migratingvms/cancelmigrate/ title="Canceling a migration" class=dd-item><a href=/forklift/migratingvms/cancelmigrate/>Canceling a migration</a></li><li data-nav-id=/forklift/migratingvms/advancedmigrate/ title="Advanced migration options" class=dd-item><a href=/forklift/migratingvms/advancedmigrate/>Advanced migration options</a></li></ul></li><li data-nav-id=/forklift/installingforklift/ title="Installing Forklift" class=dd-item><a href=/forklift/installingforklift/>Installing Forklift</a><ul><li data-nav-id=/forklift/installingforklift/upgrade/ title="Upgrading Forklift" class=dd-item><a href=/forklift/installingforklift/upgrade/>Upgrading Forklift</a></li><li data-nav-id=/forklift/installingforklift/uninstall/ title="Uninstalling Forklift" class=dd-item><a href=/forklift/installingforklift/uninstall/>Uninstalling Forklift</a></li><li data-nav-id=/forklift/installingforklift/installation/ title="Installing the Forklift Operator" class=dd-item><a href=/forklift/installingforklift/installation/>Installing the Forklift Operator</a></li><li data-nav-id=/forklift/installingforklift/prereqs/ title=Prerequisites class=dd-item><a href=/forklift/installingforklift/prereqs/>Prerequisites</a></li></ul></li></ul></li><li data-nav-id=/move2kube/ title=Move2Kube class=dd-item><a href=/move2kube/><b>3 </b>Move2Kube</a><ul><li data-nav-id=/move2kube/installation/ title=Installation class=dd-item><a href=/move2kube/installation/>Installation</a></li><li data-nav-id=/move2kube/overview/ title=Overview class=dd-item><a href=/move2kube/overview/>Overview</a></li></ul></li><li data-nav-id=/tackle/ title="Tackle 1.0 & 2.0" class="dd-item
parent"><a href=/tackle/><b>4 </b>Tackle 1.0 & 2.0</a><ul><li data-nav-id=/tackle/tackle1/ title="Tackle 1.0" class=dd-item><a href=/tackle/tackle1/><b>4.1 </b>Tackle 1.0</a><ul><li data-nav-id=/tackle/tackle1/upgrade/ title="Upgrading Tackle" class=dd-item><a href=/tackle/tackle1/upgrade/>Upgrading Tackle</a></li><li data-nav-id=/tackle/tackle1/webconsolesvcs/ title="Web Console Services" class=dd-item><a href=/tackle/tackle1/webconsolesvcs/>Web Console Services</a></li><li data-nav-id=/tackle/tackle1/manageusers/ title="Managing users and credentials" class=dd-item><a href=/tackle/tackle1/manageusers/>Managing users and credentials</a></li><li data-nav-id=/tackle/tackle1/manageassess/ title="Managing assessments" class=dd-item><a href=/tackle/tackle1/manageassess/>Managing assessments</a></li><li data-nav-id=/tackle/tackle1/manageapps/ title="Managing applications" class=dd-item><a href=/tackle/tackle1/manageapps/>Managing applications</a></li><li data-nav-id=/tackle/tackle1/additionaltools/ title="Additional tools" class=dd-item><a href=/tackle/tackle1/additionaltools/>Additional tools</a></li></ul></li><li data-nav-id=/tackle/tackle2/ title="Tackle 2.0" class=dd-item><a href=/tackle/tackle2/><b>4.2 </b>Tackle 2.0</a><ul><li data-nav-id=/tackle/tackle2/admintasks/ title="Administrator view tasks" class=dd-item><a href=/tackle/tackle2/admintasks/>Administrator view tasks</a></li><li data-nav-id=/tackle/tackle2/views/ title="Tackle 2.0 Views" class=dd-item><a href=/tackle/tackle2/views/>Tackle 2.0 Views</a></li><li data-nav-id=/tackle/tackle2/instances/ title="Seeding Instances" class=dd-item><a href=/tackle/tackle2/instances/>Seeding Instances</a></li><li data-nav-id=/tackle/tackle2/assessanalyze/ title="Assessing and analyzing applications" class=dd-item><a href=/tackle/tackle2/assessanalyze/>Assessing and analyzing applications</a></li><li data-nav-id=/tackle/tackle2/addapps/ title="Adding applications" class=dd-item><a href=/tackle/tackle2/addapps/>Adding applications</a></li></ul></li><li data-nav-id=/tackle/overview/ title=Overview class=dd-item><a href=/tackle/overview/>Overview</a></li><li data-nav-id=/tackle/upgradeto2/ title="Upgrading from 1.2 to 2.0" class="dd-item active"><a href=/tackle/upgradeto2/>Upgrading from 1.2 to 2.0</a></li><li data-nav-id=/tackle/installation/ title="Installing Tackle 2.0" class=dd-item><a href=/tackle/installation/>Installing Tackle 2.0</a></li><li data-nav-id=/tackle/installation1/ title="Installing Tackle 1.0" class=dd-item><a href=/tackle/installation1/>Installing Tackle 1.0</a></li></ul></li></ul><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links>Upgrading from 1.2 to 2.0</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#exportimport>Export/Import</a><ul><li><a href=#delayed-export>Delayed Export</a></li></ul></li><li><a href=#heading></a><ul><li><a href=#verifying-and-installing-yaml-parser>Verifying and installing YAML Parser</a></li></ul></li><li><a href=#using-the-upgrade-tool>Using the Upgrade tool</a><ul><li><a href=#getting-started>Getting started</a></li><li><a href=#export-tackle-12>Export Tackle 1.2</a></li><li><a href=#import-to-tackle-2-hub>Import to Tackle 2 Hub</a></li><li><a href=#import-troubleshooting>Import troubleshooting</a></li></ul></li><li><a href=#cleaning-objects>Cleaning objects</a><ul><li><a href=#clean-objects>Clean objects</a></li><li><a href=#clean-all-objects>Clean all objects</a></li></ul></li><li><a href=#command-line-options>Command line options</a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Upgrading from 1.2 to 2.0</h1><blockquote><p>For additional information, see the <a href=https://github.com/konveyor/tackle2-hub/tree/main/hack/tool>Tackle CLI tool directory</a> in the tackle2-hub repository.</p></blockquote><p>A CLI tool is available to upgrade Tackle that will migrate application data seeds from a running 1.2 instance to a running 2.0 instance, or export the data to be imported at a later time. The tool has the following functions:</p><ul><li><strong><code>export-tackle1</code>:</strong> Exports Tackle 1.2 API objects into local JSON files (tags, tag types, and job functions).</li><li><strong><code>tackle --skip-destination-check export-tackle1</code>:</strong> Exports Tackle 1.2 API objects into a local directory.</li><li><strong><code>import</code>:</strong> Creates objects in Tackle 2 from local JSON files.</li><li><strong><code>clean</code>:</strong> Deletes objects uploaded to Tackle 2 from local JSON files.</li><li><strong><code>clean-all</code>:</strong> Deletes all data returned by Tackle 2 including seeds and additional data to clean, and skips some Pathfinder items without index action.</li></ul><h2 id=exportimport>Export/Import</h2><p>To export data from a running 1.2 Tackle instance and import it into a running 2.0 instance, the following commands are used.</p><pre tabindex=0><code>* tackle export-tackle1
* tackle import
</code></pre><p>The <strong><code>export-tackle1</code></strong> command identifies seed resources in the Tackle2 instance first, then downloads all resources from Tackle 1.2 API, transforms it to the format expected by the Tackle 2 Hub, and lastly re-maps resources to the seeds already existing in the destination Tackle2 Hub API. The result is serialized and stored into local JSON files.</p><p>The <strong><code>tackle import</code></strong> command connects to Tackle2 Hub, checks existing objects for possible collisions (by IDs) and uploads resources from local JSON files.</p><h3 id=delayed-export>Delayed Export</h3><p>If a Tackle 2.0 instance is not available or one needs to be cleaned up, all 1.2 instance data is exported to a local directory regardless of what already exists in Tackle 2.0. To export data for delayed import, the following commands are used.</p><pre tabindex=0><code>* tackle --skip-destination-check export-tackle1
* tackle clean-all
* tackle import
</code></pre><p>See the CLI options section below for more tool functions.</p><h2 id=heading></h2><ul><li>Git</li><li>Python 3 with a YAML parser<ul><li>RHEL8/Python 3.6: Parser included</li><li>RHEL9/Python 3.9: PyYAML module needs to be installed</li></ul></li></ul><h3 id=verifying-and-installing-yaml-parser>Verifying and installing YAML Parser</h3><p>Follow the steps below to install a YAML parser.</p><blockquote><p><strong>Note:</strong> Use the <strong>python3 -m pip install pyyaml</strong> command to verify a parser is installed or to install the parser on non-RHEL-like distributions that have the dnf command.</p></blockquote><ul><li>Install parser for RHEL-like Linux systems.</li></ul><pre tabindex=0><code>dnf install python39 python3-pyyaml git
</code></pre><h2 id=using-the-upgrade-tool>Using the Upgrade tool</h2><p>Follow these procedures to download and start the upgrade tool, then export the 1.2 Tackle instance objects and import them into the Tackle 2.0 instance.</p><h3 id=getting-started>Getting started</h3><p>Follow the steps below to clone the tool repository, set credentials, and run the tool.</p><p>Use the tackle-config.yml.example file as a template to set your Tackle endpoints and credentials and save it as tackle-config.yml.</p><p><strong>Procedure</strong></p><ol><li>Clone Github repository.</li></ol><pre tabindex=0><code>git clone https://github.com/konveyor/tackle2-hub.git
</code></pre><ol start=2><li>Change to the tool directory.</li></ol><pre tabindex=0><code>cd hack/tool
</code></pre><ol start=3><li>Set API endpoints and credentials in a config file (tackle-config.yml by default).</li></ol><pre tabindex=0><code># Main Tackle 2 endpoint and credentials
url: https://tackle-konveyor-tackle.apps.cluster.local
username: admin
password:
# Tackle 1.2 endpoint and credentials, e.g. to dump data and migrate to Tackle2
tackle1:
  url: https://tackle-tackle.apps.mta01.cluster.local
  username: tackle
  password:
</code></pre><ol start=4><li>Run the tackle tool.</li></ol><pre tabindex=0><code>./tackle
</code></pre><h3 id=export-tackle-12>Export Tackle 1.2</h3><p>Run <strong><code>tackle export-tackle1</code></strong> to create a data dump of Tackle 1.2 objects into JSON files in a default local directory: ./tackle-data.</p><blockquote><p><strong>Note:</strong> Unverified HTTPS warnings from Python could be hidden by <strong>export PYTHONWARNINGS=&ldquo;ignore:Unverified HTTPS request&rdquo;</strong> or with the <strong>-w</strong> command option.</p></blockquote><p><strong>Procedure</strong></p><ol><li>Run the tackle export on the 1.2 instance.</li></ol><pre tabindex=0><code>tackle export-tackle1
</code></pre><ol start=2><li>Review the JSON files in the <strong><code>./tackle-data</code></strong> directory and modify if necessary.</li></ol><h3 id=import-to-tackle-2-hub>Import to Tackle 2 Hub</h3><p>After checking the local JSON dump files in ./tackle-data directory (if needed), use the command below to create objects in Tackle 2 Hub by running <strong><code>tackle import</code></strong>.</p><p><strong>Procedure</strong></p><ul><li>Run the tackle export on the 1.2 instance.</li></ul><pre tabindex=0><code>tackle import
</code></pre><h3 id=import-troubleshooting>Import troubleshooting</h3><p>The <strong><code>tackle import</code></strong> command could fail in a pre-import check phase which ensures there are no resources of a given type with the same ID in the Tackle 2.0 destination (error after checking tagtypes in destination Tackle2.. etc.). In this case, run the <strong><code>tackle clean</code></strong> command, to remove these objects from the destination API, or remove it manually either from the destination or from the JSON data files.</p><p>If the import failed in the upload phase (error after Uploading tagtypes.. etc.), try running <strong><code>tackle clean</code></strong> to remove already imported objects followed by tackle clean-all which lists all resources of all known data types in the destination Tackle 2 API and deletes it without looking to local data files.</p><h2 id=cleaning-objects>Cleaning objects</h2><blockquote><p><strong>Warning:</strong> All clean actions may delete objects already present in the Tackle 2.0 that are unrelated to the import data.</p></blockquote><h3 id=clean-objects>Clean objects</h3><p>In the event existing objects in the Tackle 2.0 instance are in conflict with the Tackle 1.2 JSON dump files, the following command will delete objects previously created by the <strong><code>import</code></strong> command.</p><p><strong>Procedure</strong></p><ul><li>Run the tackle export on the 1.2 instance.</li></ul><pre tabindex=0><code>tackle clean
</code></pre><h3 id=clean-all-objects>Clean all objects</h3><p>Follow the steps below to list objects from all data types and delete those resources to clean the Tackle 2.0 instance.</p><blockquote><p><strong>Note:</strong> The <strong>clean-all</strong> command deletes all resources from the Tackle 2.0 Hub API, however, the Pathfinder API does not support listing assessments without providing an applicationID. The applications may not be present in Hub, so an &ldquo;orphaned&rdquo; assessments could stay in Pathfinder. In order to resolve potential collision with imported data, run <strong>tackle clean</strong> together with the <strong>clean-all</strong> command.</p></blockquote><p><strong>Procedure</strong></p><ol><li>Run the tackle export on the 1.2 instance.</li></ol><pre tabindex=0><code>tackle clean-all
</code></pre><ol start=2><li>Review the JSON files in the <strong><code>./tackle-data</code></strong> directory.</li></ol><h2 id=command-line-options>Command line options</h2><p>The upgrade tool has the following command line options.</p><ul><li><p><strong><code>-c / --config</code>:</strong> This path specifies a YAML file with configuration options including endpoints and credentials for Tackle APIs (tackle-config.yml by default).</p></li><li><p><strong><code>-v / --verbose</code>:</strong> Verbose output option logs all API requests and responses providing more information for possible debugging (off by default).</p></li><li><p><strong><code>-d / --data-dir</code>:</strong> Data directory specifies a path to a local directory for Tackle database records in JSON format (./tackle-data by default).</p></li><li><p><strong><code>-s / --skip-destination-check</code>:</strong> Creates a full export without having access to the Tackle 2.0 destination and executes all seed objects with this option. When importing this data, the destination needs to be empty (run clean-all first).</p></li><li><p><strong><code>-w / --disable-ssl-warnings</code>:</strong> Supress SSL warnings option for api requests.</p></li><li><p><strong><code>-i / --ignore-import-errors</code>:</strong> Import errors can be skipped.</p><p><strong>Warning:</strong> This option is not recommended. Only use with high attention to avoid data inconsistency. If the import has failed, it is recommended use the tackle clean command to only remove imported resources.</p></li></ul><p><strong>Example:</strong></p><pre tabindex=0><code>$ tackle --help
usage: tackle [-h] [-c [CONFIG]] [-d [DATA_DIR]] [-v] [-s] [action ...]

Konveyor Tackle maintenance tool.

positional arguments:
  action                One or more Tackle commands that should be executed, options: export-tackle1 import clean clean-all

options:
  -h, --help            show this help message and exit
  -c [CONFIG], --config [CONFIG]
                        A config file path (tackle-config.yml by default).
  -d [DATA_DIR], --data-dir [DATA_DIR]
                        Local Tackle data directory path (tackle-data by default).
  -v, --verbose         Print verbose output (including all API requests).
  -s, --skip-destination-check
                        Skip connection and data check of Tackle 2 destination.
  -w, --disable-ssl-warnings
                        Do not display warnings during ssl check for api requests.
  -i, --ignore-import-errors
                        Skip to next item if an item fails load.
</code></pre><footer class=footline></footer></div></div><div id=navigation></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js></script>
<script src=/js/perfect-scrollbar.min.js></script>
<script src=/js/perfect-scrollbar.jquery.min.js></script>
<script src=/js/jquery.sticky.js></script>
<script src=/js/featherlight.min.js></script>
<script src=/js/highlight.pack.js></script>
<script>hljs.initHighlightingOnLoad()</script><script src=/js/modernizr.custom-3.6.0.js></script>
<script src=/js/learn.js></script>
<script src=/js/hugo-learn.js></script>
<script src=https://unpkg.com/mermaid@8.8.0/dist/mermaid.min.js></script>
<script>mermaid.initialize({startOnLoad:!0})</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TKPDMS3" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript></body></html>